<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>拍照2</title>
    <script src="https://cdn.jsdelivr.net/npm/vconsole@latest/dist/vconsole.min.js"></script>
  </head>

  <body>
    <br />
    <video
      id="v"
      style="width: 640px; height: 480px"
      playsinline
      autoplay
      x5-video-player-type="h5"
      style="object-fit: fill"
    ></video>
    <canvas id="canvas" style="display: none"></canvas>
    <span id="text">3</span>
    <br />
    <script>
      const vConsole = new VConsole();
      var video = document.querySelector("video");

      navigator.mediaDevices
        .getUserMedia({
          video: true,
          audio: false,
        })
        .then(function (stream) {
          video.srcObject = stream;
          video.onloadedmetadata = function (e) {
            // video.play();
          };
          /* 使用这个 stream stream */
        })
        .catch(function (err) {
          console.log(456);

          document.getElementById("text").innerHTML = err;
          /* 处理 error */
        });
    </script>
  </body>
</html>
